(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{7369:function(e,a,s){Promise.resolve().then(s.bind(s,5250))},5250:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return m}});var l=s(7437),i=s(2265);function t(e){let{value:a,onChange:s}=e;return(0,l.jsxs)("select",{className:"linear-select",value:a,onChange:e=>s(e.target.value),children:[(0,l.jsx)("option",{value:"conversation",children:"Conversation Analysis"}),(0,l.jsx)("option",{value:"image",children:"Image Analysis"}),(0,l.jsx)("option",{value:"summarize",children:"Document / URL Summarization"})]})}function n(e){let{children:a}=e,[s,t]=(0,i.useState)(null),[n,r]=(0,i.useState)(!0);return((0,i.useEffect)(()=>{(async()=>{try{let a=await fetch("/api/auth/me");if(a.ok){var e;let s=await a.json();t(null!==(e=s.user)&&void 0!==e?e:null)}}finally{r(!1)}})()},[]),n)?(0,l.jsx)("div",{className:"p-6",children:"Loading…"}):s?(0,l.jsx)(l.Fragment,{children:a}):(0,l.jsxs)("div",{className:"max-w-md mx-auto mt-24 linear-card p-6 space-y-4",children:[(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsx)("div",{className:"linear-section-title",children:"Sign In"}),(0,l.jsx)("p",{className:"text-sm text-muted",children:"Use a magic link to sign in. No password required."})]}),(0,l.jsxs)("form",{className:"space-y-3",onSubmit:async e=>{var a,s;e.preventDefault();let l=String(null!==(a=new FormData(e.currentTarget).get("email"))&&void 0!==a?a:"");await fetch("/api/auth/magic-link",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:l})});let i=await fetch("/api/auth/me");i.ok&&t(null!==(s=(await i.json()).user)&&void 0!==s?s:null)},children:[(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsx)("label",{className:"linear-label",children:"Email"}),(0,l.jsx)("input",{name:"email",type:"email",required:!0,className:"linear-input w-full",placeholder:"you@example.com"})]}),(0,l.jsx)("button",{className:"linear-button w-full",type:"submit",children:"Send magic link"})]})]})}function r(){let[e,a]=(0,i.useState)(null),[s,t]=(0,i.useState)(!1),[n,r]=(0,i.useState)(""),[c,d]=(0,i.useState)([]),[m,u]=(0,i.useState)(""),o=async()=>{var a,s,l;if(!e)return;t(!0),r(""),d([]),u("");let i=new FormData;i.append("audio",e);let n=await fetch("/api/conversation",{method:"POST",body:i});if(t(!1),!n.ok){alert(await n.text());return}let c=await n.json();r(null!==(a=c.transcript)&&void 0!==a?a:""),d(null!==(s=c.diarization)&&void 0!==s?s:[]),u(null!==(l=c.summary)&&void 0!==l?l:"")};return(0,l.jsxs)("div",{className:"linear-card p-6 space-y-6",children:[(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("div",{className:"linear-section-title",children:"Conversation Analysis"}),(0,l.jsx)("p",{className:"text-sm text-muted",children:"Upload an audio file. We'll transcribe, diarize (max 2 speakers), and summarize."})]}),(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)("input",{type:"file",accept:"audio/*",onChange:e=>{var s,l;return a(null!==(l=null===(s=e.target.files)||void 0===s?void 0:s[0])&&void 0!==l?l:null)},className:"linear-input"}),(0,l.jsx)("button",{className:"linear-button",disabled:!e||s,onClick:o,children:s?"Processing…":"Analyze"})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,l.jsxs)("div",{className:"linear-card p-4 space-y-2",children:[(0,l.jsx)("div",{className:"linear-label",children:"Transcript"}),(0,l.jsx)("div",{className:"text-sm whitespace-pre-wrap text-muted min-h-24",children:n||"—"})]}),(0,l.jsxs)("div",{className:"linear-card p-4 space-y-2",children:[(0,l.jsx)("div",{className:"linear-label",children:"Diarization"}),(0,l.jsxs)("div",{className:"text-sm text-muted min-h-24 space-y-2",children:[0===c.length&&"—",c.map((e,a)=>(0,l.jsxs)("div",{children:[(0,l.jsxs)("span",{className:"font-medium text-white",children:["Speaker ",e.speaker,":"]})," ",e.text]},a))]})]}),(0,l.jsxs)("div",{className:"linear-card p-4 space-y-2",children:[(0,l.jsx)("div",{className:"linear-label",children:"Summary"}),(0,l.jsx)("div",{className:"text-sm whitespace-pre-wrap text-muted min-h-24",children:m||"—"})]})]})]})}function c(){let[e,a]=(0,i.useState)(null),[s,t]=(0,i.useState)(!1),[n,r]=(0,i.useState)(""),c=async()=>{var a;if(!e)return;t(!0),r("");let s=new FormData;s.append("image",e);let l=await fetch("/api/image",{method:"POST",body:s});if(t(!1),!l.ok){alert(await l.text());return}r(null!==(a=(await l.json()).description)&&void 0!==a?a:"")};return(0,l.jsxs)("div",{className:"linear-card p-6 space-y-6",children:[(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("div",{className:"linear-section-title",children:"Image Analysis"}),(0,l.jsx)("p",{className:"text-sm text-muted",children:"Upload an image and get a detailed description."})]}),(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{var s,l;return a(null!==(l=null===(s=e.target.files)||void 0===s?void 0:s[0])&&void 0!==l?l:null)},className:"linear-input"}),(0,l.jsx)("button",{className:"linear-button",disabled:!e||s,onClick:c,children:s?"Analyzing…":"Analyze"})]}),(0,l.jsxs)("div",{className:"linear-card p-4 space-y-2",children:[(0,l.jsx)("div",{className:"linear-label",children:"Description"}),(0,l.jsx)("div",{className:"text-sm whitespace-pre-wrap text-muted min-h-24",children:n||"—"})]})]})}function d(){let[e,a]=(0,i.useState)(null),[s,t]=(0,i.useState)(""),[n,r]=(0,i.useState)(!1),[c,d]=(0,i.useState)(""),m=async()=>{var a;r(!0),d("");let l=new FormData;e&&l.append("file",e),s&&l.append("url",s);let i=await fetch("/api/summarize",{method:"POST",body:l});if(r(!1),!i.ok){alert(await i.text());return}d(null!==(a=(await i.json()).summary)&&void 0!==a?a:"")};return(0,l.jsxs)("div",{className:"linear-card p-6 space-y-6",children:[(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)("div",{className:"linear-section-title",children:"Document / URL Summarization"}),(0,l.jsx)("p",{className:"text-sm text-muted",children:"Upload a PDF/DOC or provide a URL. We'll summarize concisely."})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 items-end",children:[(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsx)("label",{className:"linear-label",children:"PDF / DOC"}),(0,l.jsx)("input",{type:"file",accept:".pdf,.doc,.docx",onChange:e=>{var s,l;return a(null!==(l=null===(s=e.target.files)||void 0===s?void 0:s[0])&&void 0!==l?l:null)},className:"linear-input w-full"})]}),(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsx)("label",{className:"linear-label",children:"URL"}),(0,l.jsx)("input",{type:"url",placeholder:"https://...",value:s,onChange:e=>t(e.target.value),className:"linear-input w-full"})]})]}),(0,l.jsx)("div",{children:(0,l.jsx)("button",{className:"linear-button",disabled:n||!e&&!s,onClick:m,children:n?"Summarizing…":"Summarize"})}),(0,l.jsxs)("div",{className:"linear-card p-4 space-y-2",children:[(0,l.jsx)("div",{className:"linear-label",children:"Summary"}),(0,l.jsx)("div",{className:"text-sm whitespace-pre-wrap text-muted min-h-24",children:c||"—"})]})]})}function m(){let[e,a]=(0,i.useState)("conversation");return(0,l.jsx)(n,{children:(0,l.jsxs)("main",{className:"max-w-5xl mx-auto p-6 space-y-6",children:[(0,l.jsxs)("header",{className:"flex items-center justify-between",children:[(0,l.jsx)("h1",{className:"text-xl font-semibold",children:"AI Playground"}),(0,l.jsx)(t,{value:e,onChange:a})]}),"conversation"===e&&(0,l.jsx)(r,{}),"image"===e&&(0,l.jsx)(c,{}),"summarize"===e&&(0,l.jsx)(d,{})]})})}}},function(e){e.O(0,[971,117,744],function(){return e(e.s=7369)}),_N_E=e.O()}]);